# Defaults for kexec initscript
# sourced by /etc/init.d/kexec and /etc/init.d/kexec-load

# Load a kexec kernel (true/false)
LOAD_KEXEC=true

# Kernel and initrd image
LIVE_IMAGE_MOUNTPOINT=/live/image
for arg in $(cat /proc/cmdline) ; do
   case "$arg" in
      BOOT_IMAGE=*)
         kernel="${arg#BOOT_IMAGE=}"
	 ;;
      initrd=*)
         initrd="${arg#initrd=}"
	 ;;
   esac
done
KERNEL_IMAGE="${LIVE_IMAGE_MOUNTPOINT}${kernel}"
INITRD="${LIVE_IMAGE_MOUNTPOINT}${initrd}"

# If empty, use current /proc/cmdline
APPEND="quiet"
case "$RUNLEVEL" in
   6)
      APPEND="${APPEND} sdmem=reboot sdmemopts=vllf"
      ;;
   *)
      APPEND="${APPEND} sdmem=halt sdmemopts=vllf"
      ;;
esac
