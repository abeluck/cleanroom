[[!meta title="tails-greeter GSoC'2011 project"]]

Implementation of custom [[todo/boot_menu]] for GDM3 as part of GSoC2011 project.

This page is the entry point to [[design
description|TailsGreeter/design]], [[proposed timeline|TailsGreeter/timeline]], [[project status
updates|TailsGreeter/blog]], [[installation instructions|TailsGreeter/install]]  and random pieces of
[[useful information|TailsGreeter/refs]].

[[!toc levels=2]]

Overall state
==============

How it should work
------------------

0. After GDM is started user is presented with language-chooser-widget. 
0. After language is chosen and 'next' pressed you see admin-password-widget in chosen locale.
0. After typing password and selecting 'next' logon performed and desktop shown as usual.

Needed options
==============

Developers are encouraged to provide input for various options to be asked via boot-menu using following template:

Templates
---------

Template for description of settings which are needed to be requested
via tails-greeter before logon:

1. name - just something we will use to point to during discussions
2. default value(s) - if any
3. effects - what exactly this option will trigger (e. g. write to some file(s), exec some processes, fire d-bus signals etc)
4. ui-hint - short description to be displayed for user in order to help him to figure out how to properly set this option
5. responsible dev - whom to ask for clarification if question arises 
6. dev's notes - overall description from dev's point of view (why do we need this option? what are the dependencies? how do we handle it now? how do we test implementation? any other comments?)

Language
--------

1. name: Language
2. default value: English
3. effects: 
   - setup locale for the TailsGreeter so that the user can understand the other
     choices;
   - generate the chosen locale (see [[design|TailsGreeter/design]] for details of locale-gen interface);
   - setup locale for the session to be started;
   - maybe more: have a look at
     `config/binary_local-hooks/20-syslinux_i18n` in Tails main Git
     repository to see what parameters it passes to live-config
     (locales, keyboard-layouts) then grep the relevant variable names
     (`KEYBOARD_LAYOUT`, `LIVE_LOCALES`, `LIVE_TIMEZONE`) in
     live-config source to see what is currently done depending on the
     chosen language, and might thus need to be triggered by
     tails-greeter as well; while appealing, installing `locales-all`
     is not an option: it avoids the need to compile locales at
     runtime, but it increases the ISO size by 130MB+, which seems
     overkill since compiling one given locale takes roughly 3s on
     a quite old laptop.
    * locale generation: we can just set a few environment variables,
      delete `/var/lib/live/config/locales`, and run the `004-locales`
      live-config script.
    * keyboard: live-config `015-keyboard-configuration`,
      `117-xserver-xorg` and `014-console-setup` scripts seem usable;
      need some envvars set.
      But... which not-started-yet software will take into account the
      config done by these scripts? Maybe they are simply not needed.
    * timezone: pending a discussion + decision among ourselves; we don't
      know yet if we'll gonna set everybody to GMT, or set localized
      timezones.
    * Note: live-config scripts we'll run ourselves must not run on boot
      before we run them: these scripts are *not* idempotent
4. ui hint: Choose the language of your Tails session.
5. responsible dev:
6. dev's notes: This item should be really visible, probably on top of the
   TailsGreeter screen. More information can be found in
   [[todo/localization_at_runtime]].

Administrator password
----------------------

1. name: Administrator password
2. default value: none
3. effects: execute `/usr/local/sbin/set-user-password` in an environnement
   containing `$TAILS_USER_PASSWORD` and then pay attention to unset this variable
   if the environnement persists. See [[todo/better_root_access_control]] to
   find tha git branch.
4. ui hint: (draft) enter here a password that will be asked to grant administrator
   rights. Leave this field blank to disable administrator rights.
5. responsible dev:
6. Related TODO item: [[todo/better_root_access_control]]
