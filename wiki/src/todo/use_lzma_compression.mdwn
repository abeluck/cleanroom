As highlighted by grml's
[documentation](http://grml.org/grml-live/#lzma-vs-zlib), LZMA
compression of the squashfs lowers the generated images' size by more
than 10%.

[[!toc levels=1]]

Current status
==============

This is implemented in the `feature/lzma` Git branch, using the
following bricks:

* Linux kernel: Squashfs LZMA support is now in mainline (2.6.38-rcX)
  in the guise of Squashfs XZ - XZ is LZMA2 which is the successor to
  LZMA. Current Debian unstable kernels (2.6.39 and later) support it.
* Userspace tools: `squashfs-tools` 4.2 adds support for XZ
  compression. It is available in squeeze-backports.
* Debian Live: exporting `MKSQUASHFS_OPTIONS='-comp xz'` into the
  build environment (in `auto/build`) works.

Releasing lzma-compressed images now is a matter of deciding what
kernel version we want to ship => [[!taglink todo/discuss]].

Also, as LMZA/XZ compression increases image build time a lot, some
kind of toggleable "developer mode" that uses good old zlib instead
would be welcome: [[!taglink todo/code]].

Test results
============

Results listed bellow are the resulting ISO images size.

20110423 - devel branch
-----------------------

- default compression: 680MB
- XZ compression: 585MB

Resources
=========

* [[!debbug 553707]]
* discussion on the [[!deblist live/2009/11/msg00031.html]]
  mailing-list
